CREATE TABLE users(
    user_id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
    user_name VARCHAR(40) NOT NULL,
    email VARCHAR(60) NOT NULL UNIQUE,
    pass CHAR(40) NOT NULL,
    registration_date DATETIME NOT NULL,
    PRIMARY KEY(user_id)
);


CREATE TABLE hotels(
    hotel_id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
    hotel_name VARCHAR(100) NOT NULL,
    address VARCHAR(255) NOT NULL,
    city VARCHAR(100) NOT NULL,
    country VARCHAR(100) NOT NULL,
    creation_date DATETIME NOT NULL,
    PRIMARY KEY(hotel_id)
);

CREATE TABLE reviews(
    review_id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
    user_id MEDIUMINT UNSIGNED NOT NULL,
    hotel_id MEDIUMINT UNSIGNED NOT NULL,
    rating INT NOT NULL CHECK (rating BETWEEN 1 AND 5),
    description TEXT NOT NULL,
    creation_date DATETIME NOT NULL,
    PRIMARY KEY(review_id),

    CONSTRAINT FK_userOrder FOREIGN KEY (user_id)
        REFERENCES users(user_id),

    CONSTRAINT FK_hotelOrder FOREIGN KEY (hotel_id)
        REFERENCES hotels(hotel_id),

    CONSTRAINT unique_user_hotel_review UNIQUE (user_id, hotel_id)
);


Run these if you have already created the tables before Dec 12 2025

ALTER TABLE users
ADD UNIQUE (email);

ALTER TABLE reviews
ADD CONSTRAINT unique_user_hotel_review UNIQUE (user_id, hotel_id);

ALTER TABLE reviews
ADD COLUMN description TEXT NOT NULL;